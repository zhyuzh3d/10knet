<script src="./Ee.js"></script>
<template>
    <div id='Ee' xid='Ee' class='full'>
        <div class='mainBox'>
            <div class="sideBar">
                <div style='height:4px'></div>
                <div class='btnGrp1'>
                    <el-tooltip class="item" effect="light" content="创建新页面文件" placement="left-end">
                        <el-button class='rbtn' @click='pageNew'><i class="fa fa-file-text"></i></el-button>
                    </el-tooltip>

                    <el-tooltip class="item" effect="light" content="导入模版页面代码" placement="left-end">
                        <el-button class='rbtn' @click='pageTempDialogConf.show=true'><i class="fa fa-folder-open"></i></el-button>
                    </el-tooltip>

                    <el-tooltip class="item" effect="light" content="设置页面head信息" placement="left-end">
                        <el-button class='rbtn' @click='setDialogConf.show=true'><i class="fa fa-gear"></i></el-button>
                    </el-tooltip>

                    <el-tooltip class="item" effect="light" content="QQ、微信、微博，分享当前的页面效果" placement="left-end">
                        <el-button class='rbtn' @click='openShareDialog'><i class="fa fa-share-alt"></i></el-button>
                    </el-tooltip>

                    <el-tooltip class="item" effect="light" content="上传图片素材" placement="left-end">
                        <el-button class='rbtn' @click='selectUploadFile'><i class="fa fa-cloud-upload"></i></el-button>
                        <input id='uploadIpt' type='file' accept='image/*' @change='uploadIptChanged($event.target.files[0])' style='display:none' />
                    </el-tooltip>



                    <el-tooltip class="item" effect="light" content="加入【10knet编程爱好者】QQ群，求助或一起交流" placement="left-end">
                        <a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=9308aad4f0542e6beea5b367cdbc9a0ec110c884f937110441f688d6ff1d8079">
                            <el-button class='rbtn'><i class="fa fa-qq"></i></el-button>
                        </a>
                    </el-tooltip>

                    <div style="margin:18px 12px;height:1px;background:#666"></div>

                    <el-tooltip class="item" effect="light" content="账号登录或注册" placement="left-end">
                        <el-button class='rbtn' @click='accountDialogConf.show=true'>
                            <i class="fa fa-user" v-if='!accInfo'></i>
                            <img v-if='accInfo' v-bind:src='accInfo.avatar' class="avatarMini">
                        </el-button>
                    </el-tooltip>

                    <el-tooltip v-if=false class="item" effect="light" content="我的文件列表" placement="left-end">
                        <el-button class='rbtn'><i class="fa fa-list-ul"></i></el-button>
                    </el-tooltip>


                </div>
                <div class="btnGrp2">
                    <el-tooltip class="item" effect="light" content="隐藏／显示编辑器" placement="left-end">
                        <el-button class='rbtn' @click='codersBoxVis=!codersBoxVis'>
                            <i class="fa fa-code" v-bind:class='{btnOn:codersBoxVis,btnOff:!codersBoxVis}' style='font-weight: bold;'></i>
                        </el-button>
                    </el-tooltip>

                    <el-tooltip class="item" effect="light" content="关于10knet.com" placement="left-end">
                        <el-button class='rbtn' @click='aboutDialogConf.show=true'><i class="fa fa-info"></i></el-button>
                    </el-tooltip>
                </div>
                <div style='height:8px'></div>
            </div>
            <dbox class="left" wid='50%' useRight='true' hei='100%' barSize='8' xid='codersBox' v-show='codersBoxVis'>
                <dbox xid='cssCoderBox' useBottom='true' hei='30%' barSize='5'>
                    <coder xid='cssCoder' class='coderDiv' mode='css' v-bind:data='cssData' v-bind:keyupFn='refreshCss'>
                        <el-tooltip effect="light" content="编码时自动同步刷新，点击这里手工刷新并规范代码格式" placement="left-end">
                            <el-button class='tagbtn' size='mini' @click='beautifyCss'>&nbsp;css&nbsp;</el-button>
                        </el-tooltip>
                    </coder>
                </dbox>
                <dbox xid='bodyCoderBox' useBottom='true' hei='30%' barSize='5'>
                    <coder xid='bodyCoder' class='coderDiv' mode='text/html' v-bind:data='bodyData' v-bind:keyupFn='refreshBody'>
                        <el-tooltip effect="light" content="编码时自动同步刷新，点击这里手工刷新并规范代码格式" placement="left-end">
                            <el-button class='tagbtn' size='mini' @click='beautifyBody'>&nbsp;body&nbsp;</el-button>
                        </el-tooltip>
                    </coder>
                </dbox>
                <div class='autoFlex'>
                    <div style="height:100%">
                        <coder xid='jsCoder' class='coderDiv' mode='javascript' v-bind:data='jsData' v-bind:keyupFn='refreshJs'>
                            <el-tooltip effect="light" content="编码时回车才会刷新，点击这里手工刷新并规范代码格式" placement="left-end">
                                <el-button class='tagbtn' size='mini' @click='beautifyJs'>&nbsp;js&nbsp;<i class="fa fa-arrow-right"></i></el-button>
                            </el-tooltip>
                        </coder>
                    </div>
                </div>
            </dbox>
            <div class="right">
                <iframe preview src="templates/preview/preview.html"></iframe>
            </div>
        </div>
        <div id='dialogs'>
            <page-templates v-bind:conf='pageTempDialogConf'></page-templates>
            <page-set v-bind:conf='setDialogConf'></page-set>
            <share-html v-bind:conf='shareDialogConf'></share-html>
            <about v-bind:conf='aboutDialogConf'></about>
            <account v-bind:conf='accountDialogConf'></account>
        </div>
    </div>
</template>
<style scoped>
    .avatarMini {
        width: 18px;
        height: 18px;
        border-radius: 18px;
        border: 1px solid #FEFEFE;
        margin: -4px;
    }

    .btnOn {
        color: #FFF;
    }

    .btnOff {
        color: #666;
    }

    .btnGrp1 {
        flex: auto;
        flex-grow: 1;
        text-align: center;
    }

    .btnGrp2 {
        flex: initial;
        text-align: center;
    }

    .coderDiv {
        border-left: 1px solid #BBB
    }

    .tagbtn {
        background: rgba(180, 180, 180, 0.75);
        border: none;
        width: 40px;
    }

    .tagbtn:hover {
        color: #FFF;
    }

    .tagbtn:focus {
        color: #FFF;
    }

    .sideBar {
        width: 40px;
        background: #AAA;
        display: flex;
        flex-direction: column;
    }

    .sideBar .rbtn {
        border-radius: 4px;
        width: 32px;
        margin: 2px 4px;
        border: none;
        font-size: 14px;
        background: none;
        padding: 8px;
        text-align: center;
    }

    .sideBar .rbtn:hover {
        margin: 1px 3px;
        background: #CCC;
        border: 1px solid #999;
    }

    .autoFlex {
        flex: 1;
        flex-grow: 1;
        overflow: auto;
    }

    iframe {
        border-style: none;
        width: 100%;
        height: 100%;
        background-color: #FFF;
    }

    .full {
        position: absolute;
        margin-top: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-flow: column nowrap;
        align-items: stretch;
    }

    .mainBox {
        position: relative;
        display: flex;
        flex-flow: row nowrap;
        align-items: stretch;
        flex: 1;
    }

    .left {
        flex: initial;
        background-color: #CCC;
        display: flex;
        align-items: stretch;
        flex-flow: column nowrap;
    }

    .right {
        flex: auto;
        background-color: #FFF;
    }

    .set {
        height: 32px;
        flex: initial;
        background-color: #BBB;
    }

    .html {
        flex: 1;
        background: #EEE;
    }

    .css {
        flex: 1;
        background: #DDD;
    }

    .js {
        flex: 1;
        background: #CCC;
    }

</style>
